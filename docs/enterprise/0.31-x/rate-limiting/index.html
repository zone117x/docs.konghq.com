<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Enterprise Rate Limiting Library - v0.31-x | Kong - Open-Source API Management and Microservice Management</title>
  <meta name="description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="author" content="Mashape"/>
  <meta property="og:title" content="Open-Source API Management and Microservice Management"/>
  <meta property="og:site_name" content="Kong"/>
  <!-- use share link for facebook -->
  <meta property="og:url" content="http://getkong.org"/>
  <meta property="og:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more."/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:image" content="https://getkong.org/assets/images/share.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:site" content="@mashape"/>
  <meta name="twitter:creator" content="@mashape"/>
  <meta name="twitter:url" content="https://getkong.org"/>
  <meta name="twitter:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="twitter:image" content="https://getkong.org/assets/images/share.png">
  <meta property="fb:admins" content="227304446"/>
  <meta property="fb:admins" content="576641408"/>
  <meta name="google-site-verification" content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"/>

  <!-- New Relic -->
  <script>
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(15),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(16),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(8),t(7),"addEventListener"in window&&t(5),s.xhrWrappable&&t(9),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(8),c=t(7),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",y="pushState";t("loader").features.stn=!0,t(6);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=Date.now())}),o.on(w,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,Date.now()])}),a.on(m,function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),a.on(w,function(t,e){i(v,[e,this.bstStart,Date.now(),this.bstType])}),c.on(m,function(){this.bstStart=Date.now()}),c.on(w,function(t,e){i(v,[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=Date.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],5:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(17)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,e,n){var r=t("ee").get("history"),o=t(17)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(t,e,n){var r=t("ee").get("raf"),o=t(17)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],8:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(17)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],9:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,w,"fn-",c)}function i(t){v.push(t),h&&(g=-g,b.data=g)}function a(){for(var t=0;t<v.length;t++)r([],v[t]);v.length&&(v=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(5);var f=t("ee"),u=f.get("xhr"),d=t(17)(u),l=NREUM.o,p=l.XHR,h=l.MO,m="readystatechange",w=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],v=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,y),y.prototype=p.prototype,d.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var g=1,b=document.createTextNode(g);new h(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],10:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return h(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(11),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=h(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<d;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],11:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],12:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(15),c=t(16),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(u,function(t,e){f[e]=o(d+e,!0,"api")}),f.addPageAction=o(d+"addPageAction",!0),f.setCurrentRouteName=o(d+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(l+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],13:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],14:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],15:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],16:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],17:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(16),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){l([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){l([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){l([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function l(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!l.aborted){t&&t(n,r,o);for(var i=e(o),a=h(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[y[n]];return f&&f.push([g,n,r,i]),i}}function p(t,e){v[t]=h(t).concat(e)}function h(t){return v[t]||[]}function m(t){return d[t]=d[t]||o(n)}function w(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var v={},y={},g={on:p,emit:n,get:m,listeners:h,context:e,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var c="nr@context",s=t("gos"),f=t(15),u={},d={},l=e.exports=o();l.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=g.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(v,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=d.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(15),f=t("ee"),u=window,d=u.document,l="addEventListener",p="attachEvent",h=u.XMLHttpRequest,m=h&&h.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:h,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(12);var w=""+location,v={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1016.min.js"},y=h&&m&&m[l]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:a(),origin:w,features:{},xhrWrappable:y};d[l]?(d[l]("DOMContentLoaded",i,!1),u[l]("load",r,!1)):(d[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,10,4,3]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"46444088",sa:1}
</script>


  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "Mashape",
      "url": "https://getkong.org",
      "logo": "https://getkong.org/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/Mashape",
        "https://twitter.com/mashape",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com">
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com">
  <link rel="dns-prefetch" href="//cdn.segment.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" /><link rel="prefetch" href="/assets/images/Kogo.svg" /><link rel="prefetch" href="/assets/images/icons/icn-documentation-ee.svg" /><link rel="prefetch" href="/assets/images/kong-blue.png" /><link rel="prefetch" href="/assets/images/footer/icn-meetup-black.svg" /><link rel="dns-prefetch" href="https://buttons.github.io" /><link rel="dns-prefetch" href="https://platform.twitter.com" /><link rel="dns-prefetch" href="https://connect.facebook.net" /><link rel="dns-prefetch" href="//mashape.github.io" />

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <link rel="stylesheet" href="/assets/styles.css?v=1527631125"/>
</head>


  <body id="" >
    <header class="site-header">
  <div class="enterprise">
    <div class="container">
      <nav class="enterprise-sites one-half column">
        <ul>
          <li>
            <a href="https://konghq.com/kong-enterprise-edition">Enterprise</a>
          </li>
          <li>
            <a href="https://konghq.com/kong-community-edition">Kong API Gateway</a>
          </li>
        </ul>
      </nav>
      <nav class="enterprise-contact one-half column">
        <ul>
          <li>
            <a href="https://support.mashape.com/">Support</a>
          </li>
          <li>
            <a href="https://konghq.com/request-demo">Request Demo</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .enterprise -->
  <div class="navbar">
    <div class="container">
      <a href="/" class="navbar-brand">
        <!-- <img src="/assets/images/branding.svg" alt="Kong" width="99" height="32"> -->
        <img src="/assets/images/Kogo.svg" alt="Kong">
      </a>
      <iframe class="header-star" src="https://ghbtns.com/github-btn.html?user=Mashape&amp;repo=kong&amp;type=star" frameborder="0"
        scrolling="0" width="55" height="20"></iframe>
      <button data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar" class="navbar-toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <nav id="navbar" class="navbar-nav">
        <ul>
          <li>
            <a href="https://konghq.com/about-kong-inc/" >About</a>
          </li>
          <li>
            <a href="/docs/"  class="active" >Docs</a>
          </li>
          <li>
            <a href="https://konghq.com/plugins" >Plugins</a>
          </li>
          <li>
            <a href="/community/" >Community</a>
          </li>
          <li>
            <a href="https://konghq.com/kong-enterprise-edition/">Enterprise</a>
          </li>
          <li>
            <a href="https://github.com/Kong/kong" target="_blank">GitHub</a>
          </li>
          <li class="hidden-lg">
            <a href="https://support.mashape.com/">Support</a>
          </li>
          <li>
            <a href="https://konghq.com/install" class="button button-dark" data-analytics='{"event": "Clicked download", "type": "button", "location": "header"}'>Installation</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .navbar -->
</header>


    <div class="page ">
  <header class="page-header">
    <div class="container">
        <div class="edit-this-page">
            <a target="_blank" href="https://github.com/Kong/getkong.org/tree/master/app/docs/enterprise/0.31-x/rate-limiting.md"><i class="fa fa-github"></i> Edit this Page</a>
          </div>
      <nav class="docs-navigation">
        <a href="/docs" >Kong Community Edition (CE)</a>
        <a href="/docs/enterprise"  class="active">Kong Enterprise Edition (EE)</a>
      </nav>
      <div class="page-header-icon">
        <img src="/assets/images/icons/icn-documentation-ee.svg" alt="Documentation" />
      </div>
      <div class="page-header-title">
        <p>Documentation</p>
        <h1>Enterprise Edition (0.31-x)</h1>
        <h1></h1>
      </div>

      
        <div class="dropdown page-header-right">
          <button class="page-header-btn" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Version 0.31-x
            
            <span class="caret"></span>
          </button>

          <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="version-dropdown">
            
              
                <li>
                  <a href="/docs/enterprise/0.32-x">
                    0.32-x
                  </a>
                </li>
              
            
              
            
          </ul>
          
        </div>
      
    </div>
  </header>

  <div class="container">
    <aside class="page-navigation">
      

      

      
      <nav>
        
          <h5>Getting Started</h5>
        
        <ul>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/introduction" >
              Introduction
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/quickstart" >
              Five-minute quickstart
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/adding-your-api" >
              Adding your API
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/enabling-plugins" >
              Enabling Plugins
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/adding-consumers" >
              Adding Consumers
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/licensing" >
              Licensing
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/getting-started/accessing-your-license" >
              Accessing Your License
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
          <h5>Installation</h5>
        
        <ul>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/installation/docker" >
              Docker
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/installation/centos" >
              CentOS
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/installation/amazon-linux" >
              Amazon Linux
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/installation/ubuntu" >
              Ubuntu
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
          <h5>APIs and Plugins</h5>
        
        <ul>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/canary-release" >
              Canary Release
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/rate-limiting" >
              Rate Limiting Advanced
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/request-transformer" >
              Request Transformer Advanced
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/oauth2-introspection" >
              OAuth2 Introspection
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/openid-connect" >
              OpenID Connect Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/http-proxy-caching" >
              HTTP Proxy Caching
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/forward-proxy" >
              Forward Proxy
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/plugins/rbac-api" >
              RBAC API
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
          <h5>Kong Developer Portal</h5>
        
        <ul>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/introduction" >
              Introduction
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/getting-started" >
              Getting Started
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/understanding" >
              Understanding
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/customization" >
              Customization
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/authentication" >
              Authentication
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/faq" >
              FAQ
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/developer-portal/known-limitations" >
              Known Limitations
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
          <h5>Guides &amp; References</h5>
        
        <ul>
          
          
          <li>
            <a href="/docs/enterprise/changelog" >
              Kong Enterprise Changelog
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/kong-architecture-overview" >
              Architecture Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/kong-architecture-patterns" >
              Architecture Patterns
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/kong-implementation-checklist" >
              Implementation Checklist
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/admin-gui" >
              Accessing Admin GUI
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/vitals" >
              Kong Vitals
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/rate-limiting" class="active">
              Rate Limiting Library
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/setting-up-admin-api-rbac" >
              Setting Up Admin API RBAC
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/edition-versioning" >
              Kong Enterprise Edition Versioning
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/allowing-multiple-authentication-methods" >
              Multiple Authentication Methods
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/postgresql-redhat" >
              PostgreSQL on RedHat
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/oidc-google" >
              OpenID Connect with Google
            </a>
            
          </li>
          
          
          <li>
            <a href="/docs/enterprise/0.31-x/oidc-auth0" >
              OpenID Connect with Auth0
            </a>
            
          </li>
          
        </ul>
      </nav>
      
    </aside>

    <div class="page-content-container" id="documentation">
      <div class="page-content">
        <div class="content">
          
          
          <div class="alert alert-warning">
            <strong>Careful!</strong> You are browsing documentation for an outdated version of Kong. Go <a href="/docs/latest">here</a> to browse the documentation for the latest version.
          </div>
          

          <h1 id="rate-limiting-library">Rate Limiting Library</h1>

<h2 id="overview">Overview</h2>

<p>This library is designed to provide an efficient, scalable, eventually-consistent sliding window rate limiting library. It relies on atomic operations in shared ngx memory zones to track window counters within a given node, periodically syncing this data to a central data store (current Cassandra, Postgres, and Redis).</p>

<p>A sliding window rate limiting implementation tracks the number of hits assigned to a specific key (such as an IP address, Consumer, Credential, etc) within a given time window, taking into account previous hit rates to smooth out a calculated rate, while still providing a familiar windowing interface that modern developers are used to (e.g., n hits per second/minute/hour). This is similar to a fixed window implementation, in which request rates reset at the beginning of the window, but without the &quot;reset bump&quot; from which fixed window implementations suffer, while providing a more intuitive interface beyond what leaky bucket or token bucket implementations can offer. Note that we use the term &quot;hit&quot; instead of &quot;request&quot; when referring to incrementing values for rate limit keys, because this library provides an abstract rate limiting interface; a sliding window implementation may have uses outside of HTTP request rate limiting, thus, we describe this library in a more abstract sense.</p>

<p>A sliding window takes into account a weighted value of the previous window when calculating the current rate for a given key. A window is defined as a period of time, starting at a given &quot;floor&quot; timestamp, where the floor is calculated based on the size of the window. For window sizes of 60 seconds, the floor always falls at the 0th second (e.g., at the beginning of any given minute). Likewise, windows with a size of 30 seconds will begin at the 0th and 30th seconds of each minute.</p>

<p>Consider a rate limit of 10 hits per minute. In this configuration, this library will calculate the hit rate of a given key based on the number of hits for the current window (starting at the beginning of the current minute), and a weighted percentage of all hits of the previous window (e.g., the previous minute). This weight is calculated based on the current timestamp with respect to the window size in question; the farther away the current time is from the start of the previous window, the lower the weight percentage. This value is best expressed through an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">current window rate: 10
previous window rate: 40
window size: 60
window position: 30 (seconds past the start of the current window)
weight = .5 (60 second window size - 30 seconds past the window start)

rate = 'current rate' + 'previous weight' * 'weight'
     = 10             + 40                * ('window size' - 'window position') / 'window size'
     = 10             + 40                * (60 - 30) / 60
     = 10             + 40                * .5
     = 30
</code></pre></div>
<p>Strictly speaking, the formula used to define the weighting percentage is as follows:</p>

<p><code>weight = (window_size - (time() % window_size)) / window_size</code></p>

<p>Where <code>time()</code> is the value of the current Unix timestamp.</p>

<p>Each node in the Kong cluster relies on its own in-memory data store as the source of truth for rate limiting counters. Periodically, each node pushes a counter increment for each key it saw to the cluster, which is expected to atomically apply this diff to the appropriate key. The node then retrieves this key&#39;s value from the data store, along with other relevant keys for this data sync cycle. In this manner, each node shares the relevant portions of data with the cluster, while relying on a very high-performance method of tracking data during each request. This cycle of converge -&gt; diverge -&gt; reconverge among nodes in the cluster provides our eventually-consistent model.</p>

<p>he periodic rate at which nodes converge is configurable; shorter sync intervals will result in less divergence of data points when traffic is spread across multiple nodes in the cluster (e.g., when sitting behind a round robin balancer), whereas longer sync intervals put less r/w pressure on the datastore, and less overhead on each node to calculate diffs and fetch new synced values. The desirable value here depends on use case; when using cluster syncing to refresh nodes periodically (e.g., to inform new cluster nodes of counter data), a value of 10-30 seconds may be desirable, to minimize data store traffic. Contrarily, environments demanding stronger consistency between nodes (such as orchestrated deployments involving a high churn rate among cluster membership, or cases where strict rate limiting policies must be applied to node sitting behind a non-hashing load balancer) should use a lower sync period, on the order of milliseconds. The minimum possible value is 0.001 (1 millisecond), though practically this value is limited by network performance between Kong nodes and the configured data store.</p>

<p>In addition to periodic data sync behavior, this library can implement rate limiting counter in a synchronous pattern by defining its <code>sync_rate</code> as <code>0</code>. In such a case, the given counter will be applied directly to the datastore. This behavior is desirable in cases where stronger consistency among the cluster is desired; such a configuration comes with the cost of needing to communicate with the datastore (or Redis) on every request, which can induce noticeable latency into the request (&quot;noticeable&quot; being a relative term of typically a few milliseconds, depending on the performance of the storage mechanism in question; for comparison, Kong typically processes requests on the order of tens of microseconds).</p>

<p>This library can also forgo syncing counter data entirely, and only apply incremental counters to its local memory zone, by defining a <code>sync_rate</code> value of less than <code>0</code>. This behavior is useful when cluster-wide syncing of data is unnecessary, such as environments using only a single Kong node, or where Kong nodes live behind a hashing load balancer and are treated as isolated instances.</p>

<p>Module configuration data, such as sync rate, shared dictionary name, storage policy, etc, is kept in a per-worker public configuration table. Multiple configurations can be defined as stored as arbitrary <code>namespaces</code> (more on this below).</p>

<h2 id="developer-notes">Developer Notes</h2>

<h3 id="public-functions">Public Functions</h3>

<p>The following public functions are provided by this library:</p>

<p><code>ratelimiting.new</code></p>

<p><em>syntax: ok = ratelimiting.new(opts)</em></p>

<p>Define configurations for a new namespace. The following options are accepted:</p>

<ul>
<li>dict: Name of the shared dictionary to use</li>
<li>sync_rate: Rate, in seconds, to sync data diffs to the storage server.</li>
<li>strategy: Storage strategy to use. currently cassandra, postgres, and redis are supported. Strategies must provide several public - functions defined below.</li>
<li>strategy_opts: A table of options used by the storage strategy. Currently only applicable for the &#39;redis&#39; strategy.</li>
<li>namespace: String defining these config values. A namespace may only be defined once; if a namespace has already been defined on this worker, an error is thrown. If no namespace is defined, the literal string &quot;default&quot; will be used.</li>
<li>window_sizes: A list of window sizes used by this configuration.</li>
</ul>

<p><code>ratelimiting.increment</code></p>

<p><em>syntax: rate = ratelimiting.increment(key, window_size, value, namespace?)</em></p>

<p>Increment a given key for window_size by value. If namespace is undefined, the &quot;default&quot; namespace is used. value can be any number Lua type (but ensure that the storage strategy in use for this namespace can support decimal values if a non-integer value is provided). This function returns the sliding rate for this key/window_size after the increment of value has been applied.</p>

<p><code>ratelimit.sliding_window</code></p>

<p><em>syntax: rate = ratelimit.sliding_window(key, window_size, cur_diff?, namespace?)</em></p>

<p>Return the current sliding rate for this key/window_size. An optional cur_diff value can be provided that overrides the current stored diff for this key. If <code>namespace</code> is undefined, the &quot;default&quot; namespace is used.</p>

<p><code>ratelimiting.sync</code></p>

<p><em>syntax: ratelimiting.sync(premature, namespace?)</em></p>

<p>Sync all currently stored key diffs in this worker with the storage server, and retrieve the newly synced value. If namespace is undefined, the &quot;default&quot; <code>namespace</code> is used. Before the diffs are pushed, another sync call for the given namespace is scheduled at <code>sync_rate</code> seconds in the future. Given this, this function should typically be called during the <code>init_worker</code> phase to initialize the recurring timer. This function is intended to be called in an <code>ngx.timer</code> context; hence, the first variable represents the injected <code>premature</code> param.</p>

<p><code>ratelimiting.fetch</code></p>

<p><em>syntax: ratelimiting.fetch(premature, namespace, time, timeout?)</em></p>

<p>Retrieve all relevent counters for the given namespace at the given time. This function establishes a shm mutex such that only one worker will fetch and populate the shm per execution. If timeout is defined, the mutex will expire based on the given timeout value; otherwise, the mutex is unlocked immediately following the dictionary update. This function can be called in an <code>ngx.timer</code> context; hence, the first variable represents the injected <code>premature</code> param.</p>

<h3 id="strategy-functions">Strategy Functions</h3>

<p>Storage strategies must provide the following interfaces:</p>

<h4 id="strategy_class-new">strategy_class.new</h4>

<p><em>syntax: strategy = strategy_class.new(dao_factory, opts)</em></p>

<p>Implement a new strategy object. <code>opts</code> is expected to be a table type, and can be used to pass opaque/arbitrary options to the strategy class.</p>

<h4 id="strategy-push_diffs">strategy:push_diffs</h4>

<p><em>syntax: strategy:push_diffs(diffs)</em></p>

<p>Push a table of key diffs to the storage server. diffs is a table provided in the following format:</p>
<div class="highlight"><pre><code class="language-" data-lang="">[1] = {
    key = "1.2.3.4",
    windows = {
      {
        window    = 12345610,
        size      = 60,
        diff      = 5,
        namespace = foo,
      },
      {
        window    = 12345670,
        size      = 60,
        diff      = 5,
        namespace = foo,
      },
    }
  },
  ...
  ["1.2.3.4"] = 1,
  ...
</code></pre></div>
<h4 id="strategy-get_counters">strategy:get_counters</h4>

<p><em>syntax: rows = strategy:get_counters(namespace, window_sizes, time?)</em></p>

<p>Return an iterator for each key stored in the datastore/redis for a given <code>namepsace</code> and list of window sizes. &#39;time&#39; is an optional unix second- precision timestamp; if not provided, this value will be set via <code>ngx.time()</code>. It is encouraged to pass this via a previous defined timestamp, depending on the context (e.g., if previous calls in the same thread took a nontrivial amount of time to run).</p>

<h4 id="strategy-get_window">strategy:get_window</h4>

<p><em>syntax: window = strategy:get_window(key, namespace, window_start, window_size)</em></p>

<p>Retrieve a single key from the data store based on the values provided.</p>


        </div>
      </div>
    </div>
  </div>
</div>
<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column{
      display: none !important;
    }
  }
</style>



    
  <section class="section subscribe-section" id="newsletter">
  <div class="container">
    <header class="section-header">
      <h4>Keep up with the latest features</h4>
    </header>

    <div class="row">
      <div class="one-half column offset-by-three">
        <noscript>
          <iframe id="newsletter-iframe" src="https://go.pardot.com/l/392112/2017-08-16/b2qn8v" width="100%" height="100" type="text/html"
            frameborder="0" allowTransparency="true" style="border: 0"></iframe>
        </noscript>
        <script type="text/javascript">
          var form = 'https://go.pardot.com/l/392112/2017-08-16/b2qn8v';
          var params = window.location.search;
          var thisScript = document.scripts[document.scripts.length - 1];
          var iframe = document.createElement('iframe');

          iframe.setAttribute('src', form + params);
          iframe.setAttribute('width', '100%');
          iframe.setAttribute('height', 100);
          iframe.setAttribute('type', 'text/html');
          iframe.setAttribute('frameborder', 0);
          iframe.setAttribute('allowTransparency', 'true');
          iframe.setAttribute('id', 'newsletter-iframe');
          iframe.style.border = '0';

          thisScript.parentElement.replaceChild(iframe, thisScript);
        </script>
      </div>
    </div>
  </div>
</section>



<footer class="marketing-footer--light-gray">
  <section>
    <ul>
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/kong-blue.png" alt="Kong Inc">
        </div>
      </li>
      <li>
        <nav>
          <h4>Company</h4>
          <ul>
            <li><a href="https://konghq.com/about-kong-inc/">About</a></li>
            <li><a href="https://konghq.com/investors/">Investors</a></li>
            <li><a href="http://konghq.com/blog/">Blog</a></li>
            <li><a href="https://konghq.com/jobs/">Jobs</a></li>
            <li><a href="https://konghq.com/contact/">Contact</a></li>
            <li><a href="https://support.mashape.com/">Support</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Products</h4>
          <ul>
            <li><a href="https://getkong.org/">Kong</a></li>
            <li><a href="https://konghq.com/api-dev-portal/">Dev Portal</a></li>
            <li><a href="https://konghq.com/api-analytics/">API Analytics</a></li>
            <li><a href="https://konghq.com/kong-enterprise-edition/">Enterprise</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Open Source</h4>
          <ul>
            <li><a href="http://mockbin.org/">Mockbin</a></li>
            <li><a href="http://apiembed.com/">API Embed</a></li>
            <li><a href="http://unirest.io/">Unirest</a></li>
            <li><a href="http://guardianjs.com/">Guardian JS</a></li>
            <li><a href="http://oauthbible.com/">OAuth Bible</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Legal</h4>
          <ul>
            <li><a href="https://konghq.com/terms/">Terms of Service</a></li>
            <li><a href="https://konghq.com/privacy/">Privacy Policy</a></li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <ul>
      <li>
        <span class="mashape-footer-content">&copy; Kong Inc. 2018</span>
      </li>
      <li>
        <div class="social-link">
          <a href="https://github.com/Kong" title="Github"><i aria-label="Github" class="fa fa-github" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook"><i aria-label="Facebook" class="fa fa-facebook-official" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"><img aria-label="Meetup" alt="Meetup" src="/assets/images/footer/icn-meetup-black.svg"></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter"><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
      </li>
    </ul>
  </section>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };
  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];
      if (typeof header.id !== "undefined" && header.id !== "") {
        header.prepend(anchorForId(header.id));
      }
    }
  };
  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementById("documentation");
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1527631125"></script>

    <div id="fb-root"></div>

    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>
    <script id="twitter-wjs" type="text/javascript" src="https://platform.twitter.com/widgets.js" async defer></script>
    <script id="facebook-jssdk" type="text/javascript" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506" async defer></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load(){
          var s = document.createElement('script'); s.type = 'text/javascript';
          s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
      })();
    </script>

    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=125292,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=true,
      // DO NOT EDIT BELOW THIS LINE
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>

    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("WDj0nSS7hpyxwL3evgbOzK755s0NUye6");
        analytics.page()
      }}();
    </script>

    <script type="text/javascript" src="//mashape.github.io/notification-bar/embed.js" async defer></script>
  </body>
</html>
