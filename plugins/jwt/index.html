<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Plugins - JWT | Kong - Open-Source API Management and Microservice Management</title>
  <meta name="description" content="Secure, Manage & Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="author" content="Mashape"/>
  <meta property="og:title" content="Open-Source API Management and Microservice Management"/>
  <meta property="og:site_name" content="Kong"/>
  <!-- use share link for facebook -->
  <meta property="og:url" content="http://getkong.org"/>
  <meta property="og:description" content="Secure, Manage & Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more."/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:image" content="https://getkong.org/assets/images/share.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:site" content="@mashape"/>
  <meta name="twitter:creator" content="@mashape"/>
  <meta name="twitter:url" content="https://getkong.org"/>
  <meta name="twitter:description" content="Secure, Manage & Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="twitter:image" content="https://getkong.org/assets/images/share.png">
  <meta property="fb:admins" content="227304446"/>
  <meta property="fb:admins" content="576641408"/>
  <meta name="google-site-verification" content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"/>

  <!-- New Relic -->
  <script src="/assets/newrelic.js"></script>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "Mashape",
      "url": "https://getkong.org",
      "logo": "https://getkong.org/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/Mashape",
        "https://twitter.com/mashape",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>
  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"/>
  <link rel="stylesheet" href="//cloud.typography.com/7506032/804186/css/fonts.css"/>
  <link rel="stylesheet" href="/assets/styles.css?v=1489429791"/>
</head>


  <body id="page-plugin" >
    <header class="site-header">
  <div class="enterprise">
    <div class="container">
      <nav class="enterprise-sites one-half column">
        <ul>
          <li class="active"><a href="http://getkong.org">Kong</a></li>
          <li><a href="http://gelato.io">Gelato</a></li>
          <li><a href="http://getgalileo.io">Galileo</a></li>
          <li><a href="http://www.mashape.com/enterprise/">Enterprise</a></li>
        </ul>
      </nav>
      <nav class="enterprise-contact one-half column">
        <ul>
          <li><a href="https://www.mashape.com/enterprise/#demo-form">Request Demo</a></li>
        </ul>
      </nav>
    </div>
  </div><!-- .enterprise -->
  <div class="navbar">
    <div class="container">
      <a href="/" class="navbar-brand"><img src="/assets/images/branding.svg" alt="Kong" width="99" height="32"></a>
      <iframe class="header-star" src="https://ghbtns.com/github-btn.html?user=Mashape&amp;repo=kong&amp;type=star"frameborder="0" scrolling="0" width="55" height="20"></iframe>
      <button data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar" class="navbar-toggle">
        <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button>
      <nav id="navbar" class="navbar-nav">
        <ul>
          <li><a href="/about/" >About</a></li>
          <li><a href="/docs/" >Docs</a></li>
          <li><a href="/plugins/" >Plugins</a></li>
          <li><a href="/community/" >Community</a></li>
          <li><a href="https://www.mashape.com/enterprise/">Enterprise</a></li>
          <li><a href="https://github.com/Mashape/kong" target="_blank">GitHub</a></li>
          <li>
            <a href="/install/" class="button button-dark" data-analytics='{"event": "Clicked download", "type": "button", "location": "header"}'>Installation</a>
          </li>
        </ul>
      </nav>
    </div>
  </div><!-- .navbar -->
</header>


    <div class="page page-plugin">
  
  <header class="page-header">
    <div class="container">
      
        <div class="page-header-icon">
          <img src="/assets/images/icons/plugins/jwt.png" alt="" />
        </div>
      

      <div class="page-header-title">
        
          <ul class="breadcrumbs">
            
              <li class="breadcrumb-item"><a href="/plugins">Plugins</a></li>
            
          </ul>
        

        <h1>JWT</h1>

        
      </div>

      
        <div class="page-header-right">
          <a class="page-header-btn" href="https://github.com/Mashape/kong/issues/new" target="_blank">Report Bug</a>
        </div>
      

      
    </div>
  </header>



  <div class="container">
    <aside class="page-navigation">

      
        <nav>
          
            <h5>Getting Started</h5>
          

          <ul>
            
              <li>
                <a href="#terminology">Terminology</a>

                
              </li>
            
              <li>
                <a href="#configuration">Configuration</a>

                
              </li>
            
          </ul>
        </nav>
      
        <nav>
          
            <h5>Documentation</h5>
          

          <ul>
            
              <li>
                <a href="#create-a-consumer">Create a Consumer</a>

                
              </li>
            
              <li>
                <a href="#create-a-jwt-credential">Create a JWT credential</a>

                
              </li>
            
              <li>
                <a href="#craft-a-jwt-with-a-secret-hs256">Craft a JWT with a secret (HS256)</a>

                
              </li>
            
              <li>
                <a href="#send-a-request-with-the-jwt">Send a request with the JWT</a>

                
              </li>
            
              <li>
                <a href="#optional-verified-claims">(Optional) Verified claims</a>

                
              </li>
            
              <li>
                <a href="#optional-base64-encoded-secret">(Optional) Base64 encoded secret</a>

                
              </li>
            
              <li>
                <a href="#craft-a-jwt-with-public-private-keys-rs256">Craft a JWT with public/private keys (RS256)</a>

                
              </li>
            
              <li>
                <a href="#generate-public-private-keys">Generate public/private keys</a>

                
              </li>
            
              <li>
                <a href="#upstream-headers">Upstream Headers</a>

                
              </li>
            
          </ul>
        </nav>
      
    </aside>

    <div class="page-content-container">
      <div class="page-content">
        <div class="content">
          <p>Verify requests containing HS256 or RS256 signed JSON Web Tokens (as specified in <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>). Each of your Consumers will have JWT credentials (public and secret keys) which must be used to sign their JWTs. A token can then be passed through the Authorization header or in the request&#39;s URI and Kong will either proxy the request to your upstream services if the token&#39;s signature is verified, or discard the request if not. Kong can also perform verifications on some of the registered claims of RFC 7519 (exp and nbf).</p>

<hr>

<h2 id="terminology">Terminology</h2>

<ul>
<li><code>API</code>: your upstream service, for which Kong proxies requests to.</li>
<li><code>Plugin</code>: a plugin executes actions inside Kong during the request/response lifecycle.</li>
<li><code>Consumer</code>: a developer or service using the API. When using Kong, a Consumer authenticates itself with Kong which proxies every call to the upstream API.</li>
<li><code>Credential</code>: in the JWT plugin context, a pair of unique values consisting of a public key and a secret, used to sign and verify a JWT, and associated to a Consumer.</li>
</ul>

<hr>

<h2 id="configuration">Configuration</h2>

<p>Configuring the plugin is straightforward, you can add it on top of an <a href="/docs/latest/admin-api/#api-object">API</a> by executing the following request on your Kong server:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins <span class="se">\</span>
    --data <span class="s2">"name=jwt"</span>
</code></pre></div>
<p><code>api</code>: The <code>id</code> or <code>name</code> of the API that this plugin configuration will target</p>

<p>You can also apply it for every API using the <code>http://kong:8001/plugins/</code> endpoint. Read the <a href="/docs/latest/admin-api/#add-plugin">Plugin Reference</a> for more information.</p>

<table><thead>
<tr>
<th>form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>name</code></td>
<td></td>
<td>The name of the plugin to use, in this case: <code>jwt</code></td>
</tr>
<tr>
<td><code>config.uri_param_names</code><br><em>optional</em></td>
<td><code>jwt</code></td>
<td>A list of querystring parameters that Kong will inspect to retrieve JWTs.</td>
</tr>
<tr>
<td><code>config.claims_to_verify</code><br><em>optional</em></td>
<td></td>
<td>A list of registered claims (according to <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>) that Kong can verify as well. Accepted values: <code>exp</code>, <code>nbf</code>.</td>
</tr>
<tr>
<td><code>config.key_claim_name</code><br><em>optional</em></td>
<td><code>iss</code></td>
<td>The name of the claim in which the <code>key</code> identifying the secret <strong>must</strong> be passed.</td>
</tr>
<tr>
<td><code>config.secret_is_base64</code><br><em>optional</em></td>
<td><code>false</code></td>
<td>If true, the plugin assumes the credential&#39;s <code>secret</code> to be base64 encoded. You will need to create a base64 encoded secret for your Consumer, and sign your JWT with the original secret.</td>
</tr>
<tr>
<td><code>config.anonymous</code><br><em>optional</em></td>
<td>``</td>
<td>An optional string (consumer uuid) value to use as an &quot;anonymous&quot; consumer if authentication fails. If empty (default), the request will fail with an authentication failure <code>4xx</code></td>
</tr>
</tbody></table>

<hr>

<h2 id="documentation">Documentation</h2>

<p>In order to use the plugin, you first need to create a Consumer and associate one or more credentials to it. The Consumer represents a developer using the final service/API, and a JWT credential holds the public and private keys used to verify a crafted token.</p>

<h3 id="create-a-consumer">Create a Consumer</h3>

<p>You need to associate a credential to an existing <a href="/docs/latest/admin-api/#consumer-object">Consumer</a> object. The Consumer is an entity consuming the API. To create a <a href="/docs/latest/admin-api/#consumer-object">Consumer</a> you can execute the following request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/consumers <span class="se">\</span>
    --data <span class="s2">"username=&lt;USERNAME&gt;"</span> <span class="se">\</span>
    --data <span class="s2">"custom_id=&lt;CUSTOM_ID&gt;"</span>
HTTP/1.1 201 Created
</code></pre></div>
<table><thead>
<tr>
<th>form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>username</code><br><em>semi-optional</em></td>
<td></td>
<td>The username for this Consumer. Either this field or <code>custom_id</code> must be specified.</td>
</tr>
<tr>
<td><code>custom_id</code><br><em>semi-optional</em></td>
<td></td>
<td>A custom identifier used to map the Consumer to an external database. Either this field or <code>username</code> must be specified.</td>
</tr>
</tbody></table>

<p>A <a href="/docs/latest/admin-api/#consumer-object">Consumer</a> can have many JWT credentials.</p>

<h3 id="create-a-jwt-credential">Create a JWT credential</h3>

<p>You can provision a new HS256 JWT credential by issuing the following HTTP request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/consumers/<span class="o">{</span>consumer<span class="o">}</span>/jwt
HTTP/1.1 201 Created

<span class="o">{</span>
    <span class="s2">"consumer_id"</span>: <span class="s2">"7bce93e1-0a90-489c-c887-d385545f8f4b"</span>,
    <span class="s2">"created_at"</span>: 1442426001000,
    <span class="s2">"id"</span>: <span class="s2">"bcbfb45d-e391-42bf-c2ed-94e32946753a"</span>,
    <span class="s2">"key"</span>: <span class="s2">"a36c3049b36249a3c9f8891cb127243c"</span>,
    <span class="s2">"secret"</span>: <span class="s2">"e71829c351aa4242c2719cbfbe671c09"</span>
<span class="o">}</span>
</code></pre></div>
<p><code>consumer</code>: The <code>id</code> or <code>username</code> property of the <a href="/docs/latest/admin-api/#consumer-object">Consumer</a> entity to associate the credentials to.</p>

<table><thead>
<tr>
<th>form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>key</code><br><em>optional</em></td>
<td></td>
<td>A unique string identifying the credential. If left out, it will be auto-generated.</td>
</tr>
<tr>
<td><code>algorithm</code><br><em>optional</em></td>
<td><code>HS256</code></td>
<td>The algorithm used to verify the token&#39;s signature. Can be <code>HS256</code>, <code>RS256</code>, or <code>ES256</code>.</td>
</tr>
<tr>
<td><code>rsa_public_key</code><br><em>optional</em></td>
<td></td>
<td>If <code>algorithm</code> is <code>RS256</code> or <code>ES256</code>, the public key (in PEM format) to use to verify the token&#39;s signature.</td>
</tr>
<tr>
<td><code>secret</code><br><em>optional</em></td>
<td></td>
<td>If <code>algorithm</code> is <code>HS256</code> or <code>ES256</code>, the secret used to sign JWTs for this credential. If left out, will be auto-generated.</td>
</tr>
</tbody></table>

<h3 id="craft-a-jwt-with-a-secret-hs256">Craft a JWT with a secret (HS256)</h3>

<p>Now that your Consumer has a credential, and assuming we want to sign it using <code>HS256</code>, the JWT should be crafted as follows (according to <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>):</p>

<p>First, its header must be:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HS256"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Secondly, the claims <strong>must</strong> contain the secret&#39;s <code>key</code> in the configured claim (from <code>config.key_claim_name</code>). That claim is <code>iss</code> (issuer field) by default. Set its value to our previously created credential&#39;s <code>key</code>. The claims may contain other values.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a36c3049b36249a3c9f8891cb127243c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Using the JWT debugger at <a href="https://jwt.io">https://jwt.io</a> with the header (HS256), claims (iss, etc), and <code>secret</code> associated with this <code>key</code> (e71829c351aa4242c2719cbfbe671c09), you&#39;ll end up with a JWT token of:</p>
<div class="highlight"><pre><code class="language-" data-lang="">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhMzZjMzA0OWIzNjI0OWEzYzlmODg5MWNiMTI3MjQzYyIsImV4cCI6MTQ0MjQzMDA1NCwibmJmIjoxNDQyNDI2NDU0LCJpYXQiOjE0NDI0MjY0NTR9.AhumfY35GFLuEEjrOXiaADo7Ae6gt_8VLwX7qffhQN4
</code></pre></div>
<h3 id="send-a-request-with-the-jwt">Send a request with the JWT</h3>

<p>The JWT can now be included in a request to Kong by adding it to the <code>Authorization</code> header:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl http://kong:8000/<span class="o">{</span>api path<span class="o">}</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhMzZjMzA0OWIzNjI0OWEzYzlmODg5MWNiMTI3MjQzYyIsImV4cCI6MTQ0MjQzMDA1NCwibmJmIjoxNDQyNDI2NDU0LCJpYXQiOjE0NDI0MjY0NTR9.AhumfY35GFLuEEjrOXiaADo7Ae6gt_8VLwX7qffhQN4'</span>
</code></pre></div>
<p>Or as a querystring parameter, if configured in <code>config.uri_param_names</code> (which contains <code>jwt</code> by default):</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl http://kong:8000/<span class="o">{</span>api path<span class="o">}</span>?jwt<span class="o">=</span>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhMzZjMzA0OWIzNjI0OWEzYzlmODg5MWNiMTI3MjQzYyIsImV4cCI6MTQ0MjQzMDA1NCwibmJmIjoxNDQyNDI2NDU0LCJpYXQiOjE0NDI0MjY0NTR9.AhumfY35GFLuEEjrOXiaADo7Ae6gt_8VLwX7qffhQN4
</code></pre></div>
<p>The request will be inspected by Kong, whose behavior depends on the validity of the JWT:</p>

<table><thead>
<tr>
<th>request</th>
<th>proxied to upstream API</th>
<th>response status code</th>
</tr>
</thead><tbody>
<tr>
<td>has no JWT</td>
<td>no</td>
<td>401</td>
</tr>
<tr>
<td>missing or invalid <code>iss</code> claim</td>
<td>no</td>
<td>401</td>
</tr>
<tr>
<td>invalid signature</td>
<td>no</td>
<td>403</td>
</tr>
<tr>
<td>valid signature</td>
<td>yes</td>
<td>from the upstream service</td>
</tr>
<tr>
<td>valid signature, invalid verified claim (<strong>option</strong>)</td>
<td>no</td>
<td>403</td>
</tr>
</tbody></table>

<div class="alert alert-warning">
  <strong>Note:</strong> When the JWT is valid and proxied to the API, Kong makes no modification to the request other than adding headers identifying the Consumer. The JWT will be forwarded to your upstream service, which can assume its validity. It is now the role of your service to base64 decode the JWT claims and make use of them.
</div>

<h3 id="optional-verified-claims">(<strong>Optional</strong>) Verified claims</h3>

<p>Kong can also perform verification on registered claims, as defined in <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>. To perform verification on a claim, add it to the <code>config.claims_to_verify</code> property:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># This adds verification for both nbf and exp claims:</span>
<span class="gp">$ </span>curl -X PATCH http://kong:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins/<span class="o">{</span>jwt plugin id<span class="o">}</span> <span class="se">\</span>
    --data <span class="s2">"config.claims_to_verify=exp,nbf"</span>
</code></pre></div>
<p>Supported claims:</p>

<table><thead>
<tr>
<th>claim name</th>
<th>verification</th>
</tr>
</thead><tbody>
<tr>
<td><code>exp</code></td>
<td>identifies the expiration time on or after which the JWT must not be accepted for processing.</td>
</tr>
<tr>
<td><code>nbf</code></td>
<td>identifies the time before which the JWT must not be accepted for processing.</td>
</tr>
</tbody></table>

<h3 id="optional-base64-encoded-secret">(<strong>Optional</strong>) Base64 encoded secret</h3>

<p>If your secret contains binary data (such as secrets provided by services like Auth0), you can store them as base64 encoded in Kong. Enable this option in the plugin&#39;s configuration:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X PATCH http://kong:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins/<span class="o">{</span>jwt plugin id<span class="o">}</span> <span class="se">\</span>
    --data <span class="s2">"config.secret_is_base64=true"</span>
</code></pre></div>
<p>Then, base64 encode your consumers&#39; secrets:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># secret is: "blob data"</span>
<span class="gp">$ </span>curl -X POST http://kong:8001/consumers/<span class="o">{</span>consumer<span class="o">}</span>/jwt <span class="se">\</span>
  --data <span class="s2">"secret=YmxvYiBkYXRh"</span>
</code></pre></div>
<p>And sign your JWT using the original secret (&quot;blob data&quot;).</p>

<h3 id="craft-a-jwt-with-public-private-keys-rs256-or-es256">Craft a JWT with public/private keys (RS256 or ES256)</h3>

<p>If you wish to use RS256 or ES256 to verify your JWTs, then when creating a JWT credential, select <code>RS256</code> or <code>ES256</code> as the <code>algorithm</code>, and explicitly upload the public key in the <code>rsa_public_key</code> field (including for ES256 signed tokens). For example:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/consumers/<span class="o">{</span>consumer<span class="o">}</span>/jwt <span class="se">\</span>
      -F <span class="s2">"rsa_public_key=@/path/to/public_key.pem"</span> <span class="se">\</span>
HTTP/1.1 201 Created

<span class="o">{</span>
    <span class="s2">"consumer_id"</span>: <span class="s2">"7bce93e1-0a90-489c-c887-d385545f8f4b"</span>,
    <span class="s2">"created_at"</span>: 1442426001000,
    <span class="s2">"id"</span>: <span class="s2">"bcbfb45d-e391-42bf-c2ed-94e32946753a"</span>,
    <span class="s2">"key"</span>: <span class="s2">"a36c3049b36249a3c9f8891cb127243c"</span>,
    <span class="s2">"rsa_public_key"</span>: <span class="s2">"-----BEGIN PUBLIC KEY----- ..."</span>
<span class="o">}</span>
</code></pre></div>
<p>When creating the signature, make sure that the header is:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RS256"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Secondly, the claims <strong>must</strong> contain the secret&#39;s <code>key</code> field (this <strong>isn&#39;t</strong> your private key used to generate the token, but just an identifier for this credential) in the configured claim (from <code>config.key_claim_name</code>). That claim is <code>iss</code> (issuer field) by default. Set its value to our previously created credential&#39;s <code>key</code>. The claims may contain other values.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a36c3049b36249a3c9f8891cb127243c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Then create the signature using your private keys. Using the JWT debugger at <a href="https://jwt.io">https://jwt.io</a>, set the right header (RS256), the claims (iss, etc), and the associated public key. Then append the resulting value in the <code>Authorization</code> header, for example:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl http://kong:8000/<span class="o">{</span>api path<span class="o">}</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiIxM2Q1ODE0NTcyZTc0YTIyYjFhOWEwMDJmMmQxN2MzNyJ9.uNPTnDZXVShFYUSiii78Q-IAfhnc2ExjarZr_WVhGrHHBLweOBJxGJlAKZQEKE4rVd7D6hCtWSkvAAOu7BU34OnlxtQqB8ArGX58xhpIqHtFUkj882JQ9QD6_v2S2Ad-EmEx5402ge71VWEJ0-jyH2WvfxZ_pD90n5AG5rAbYNAIlm2Ew78q4w4GVSivpletUhcv31-U3GROsa7dl8rYMqx6gyo9oIIDcGoMh3bu8su5kQc5SQBFp1CcA5H8sHGfYs-Et5rCU2A6yKbyXtpHrd1Y9oMrZpEfQdgpLae0AfWRf6JutA9SPhst9-5rn4o3cdUmto_TBGqHsFmVyob8VQ'</span>
</code></pre></div>
<h3 id="generate-public-private-keys">Generate public/private keys</h3>

<p>To create a brand new pair of public/private keys, you can run the following command:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>openssl genrsa -out private.pem 2048
</code></pre></div>
<p>This private key must be kept secret. To generate a public key corresponding to the private key, execute:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>openssl rsa -in private.pem -outform PEM -pubout -out public.pem
</code></pre></div>
<p>If you run the commands above, the public key will be written in <code>public.pem</code>, while the private key will be written in <code>private.pem</code>.</p>

<h3 id="upstream-headers">Upstream Headers</h3>

<p>When a JWT is valid, a Consumer has been authenticated, the plugin will append some headers to the request before proxying it to the upstream API/service, so that you can identify the Consumer in your code:</p>

<ul>
<li><code>X-Consumer-ID</code>, the ID of the Consumer on Kong</li>
<li><code>X-Consumer-Custom-ID</code>, the <code>custom_id</code> of the Consumer (if set)</li>
<li><code>X-Consumer-Username</code>, the <code>username</code> of the Consumer (if set)</li>
<li><code>X-Anonymous-Consumer</code>, will be set to <code>true</code> when authentication failed, and the &#39;anonymous&#39; consumer was set instead.</li>
</ul>

<p>You can use this information on your side to implement additional logic. You can use the <code>X-Consumer-ID</code> value to query the Kong Admin API and retrieve more information about the Consumer.</p>

        </div>
      </div>
    </div>
  </div>
</div>


    <footer class="footer">
  
    <section class="section subscribe-section" id="newsletter">
  <div class="container">
    <header class="section-header">
      <h4>Keep up with the latest features</h4>
    </header>


    <form action="/" class="subscribe-form">
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>

      <div class="alert alert-success" role="alert">Thank You!</div>

      <div class="input-group">
        <input type="email" name="email" placeholder="youre@awesome.com" required/>
        <button class="button button-primary" type="submit">Subscribe</button>
      </div>
    </form>
  </div>
</section>

  

  <div class="footer-bar">
    <div class="container">
      <ul class="footer-social">
        <li>
          <!-- verse link.web with link.share in the header -->
          <div class="fb-share-button" data-href="https://getkong.org" data-layout="button"></div>
        </li>
        <li>
          <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://getkong.org" data-text="KONG - the open-source management layer for APIs and Microservices" data-hashtags="opensource,API,management">Tweet</a>
        </li>
        <li>
          <a class="github-button" href="https://github.com/Mashape/kong" data-icon="octicon-star" data-count-href="/mashape/kong/stargazers" data-count-api="/repos/mashape/kong#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star mashape/kong on GitHub">Star</a>
        </li>
      </ul>
    <span>
      <a href="https://mashape.com">
        <img src="/assets/images/branding-footer.svg" alt="Mashape" width="22" height="26"/>
        &copy; <strong>2017 Mashape Inc</strong>
      </a>
    </span>
      <span class="footer-separator"></span>
      <span class="footer-nav">
        <a href="/license">License</a>
        <a href="/terms">Terms</a>
        <a href="/privacy">Privacy</a>
        <a href="https://www.mashape.com/enterprise/">Enterprise</a>
        <a href="http://blog.mashape.com/category/open-source/" target="_blank">News</a>
      </span>
    </div>
  </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/assets/app.js?v=1489429791"></script>

    <div id="fb-root"></div>

    <a id="support-bubble" href="https://gitter.im/Mashape/kong" class="js-gitter-toggle-chat-button" data-gitter-toggle-chat-state="true"></a>

    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>
    <script id="twitter-wjs" type="text/javascript" src="https://platform.twitter.com/widgets.js" async defer></script>
    <script id="facebook-jssdk" type="text/javascript" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506" async defer></script>

    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=125292,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=true,
      // DO NOT EDIT BELOW THIS LINE
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>

    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("WDj0nSS7hpyxwL3evgbOzK755s0NUye6");
        analytics.page()
      }}();
    </script>

    <script type="text/javascript" src="//mashape.github.io/notification-bar/embed.js" async defer></script>
    <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
  </body>
</html>
